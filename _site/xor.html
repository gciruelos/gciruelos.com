<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>gciruelos - XOR</title> 
        <link rel="stylesheet" type="text/css" href="./css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="./">Gonzalo Ciruelos</a>
            </div> 
            <div id="leblog">
                Blog
            </div>
        </div>
        <div id="content">
            <h1>XOR</h1>
            <div class="info">
    Posted on April 19, 2015
</div>
<p>In this post we will talk about xor. Xor is a logical operator that outputs <em>true</em> when the two input values are different, and <em>false</em> otherwise. It is usually simbolized with the \(\oplus\) symbol.</p>
<!--more-->
<p>Given that represent natural numbers (and integers) in binary, we can also do <em>bitwise</em> xor, i.e., xoring bit by bit. Then, for example \(5 \oplus 3 = 101_2 \oplus 011_2 = 110_2 = 6\)</p>
<h2 id="properties">Properties</h2>
<p>Let’s first see some of the properties of \(\oplus\).</p>
<ul>
<li>\(x \oplus x = 0\)</li>
<li>\(x \oplus 0 = x\)</li>
<li>\(x \oplus y = y \oplus x \)</li>
<li>\((x \oplus y) \oplus z = x \oplus (y \oplus z)\)</li>
</ul>
<p>All of these are really simple to prove. Note that these properties implies that \((\mathbb{N}, \oplus)\) is a group. More on this later.</p>
<h2 id="ololo">OLOLO</h2>
<p>To start appreciating how useful \(\oplus\) is, we can do this <a href="http://www.spoj.com/problems/OLOLO/">spoj problem</a>. Obviously, <strong>spoiler alert</strong>, I’m going to solve it.</p>
<p>Suppose the stream of positive integers is something like this \((p_1, p_2, …, p_i,…, p_N)\), where every element is repeated twice, except \(p_i\)that is repeated once.</p>
<p>Now we can xor all those positive integers, like</p>
<p>\[p_1 \oplus p_2 \oplus … \oplus p_i \oplus …\oplus p_N\]</p>
<p>As \(\oplus\) is commutative and associative, we can group every two elements that are equal toghether, so we end up with</p>
<p>\[(p_1 \oplus p_1) \oplus … \oplus (p_N \oplus p_N) \oplus p_i\] \[ = 0 \oplus … \oplus 0 \oplus p_i\] \[ = p_i\]</p>
<p>So all we have to do is xor all the numbers, and the final result is the number we are looking for. This algorithm takes time \(O(n)\) and space \(O(1)\).</p>
<h2 id="devils-chessboard">Devil’s Chessboard</h2>
<blockquote>
<p>Consider a standard chessboard with 64 squares. The Devil is in the room with you. He places one coin on each of the 64 squares, randomly facing heads or tails up. He arbitrarily selects a square on the board, which he calls the Magic Square. Then you have to flip a coin of your choosing, from heads to tails or vice versa. Now, a friend of yours enters the room. Just by looking at the coins, he must tell the Devil the location of the Magic Square. You may discuss any strategy/algorithm with your friend beforehand. What strategy do you use to do this?</p>
</blockquote>
<p>Think about the problem before continuing reading. It seems actually impossible, but with the information we now have about xor it should be as easy as pie.</p>
<p><strong>Solution</strong></p>
<p>Number all the squares, from 0 to 63. Let \(D\) be the square that the Devil chose. Let \({H_i}\) be all the squares such that its coin is heads and \(H = \oplus H_1 \oplus … \oplus H_n\).</p>
<p>Then we can solve for \(X\).</p>
<p>\[H \oplus X = D\]</p>
<p>Why this? Because then suppose \(X\) is tails. Then we flip that coin, and then all our friend has to do is to xor all the squares with heads, and the result is \(D\), and we are done.</p>
<p>Now suppose \(X\) is heads, then we flip it and it works as before. Because \(H = H_1 \oplus … \oplus X \oplus … \oplus H_n\), then \(H \otimes X = D \), again, because the \(X\) cancels out.</p>
<p>The end.</p>
<p>But we can generalize this. If the number of squares is a power of 2, then the equation \(G \oplus X = D\) will always have a solution in \({0,…,2^n-1}\) (if you don’t get this, think about the bits) , so we can solve the problem.</p>
<p>But what if the number of squares is not a power of two? I don’t know, it is a nice problem to think about. For a start, if the number of squares is 3, then there is no solution, i.e., the devil always wins, it can be checked case by case.</p>
<h2 id="assembly">Assembly</h2>
<p>If you ever programmed in assembly, you must have seen some instruction like</p>
<pre class="sourceCode nasm"><code class="sourceCode nasm"><span class="kw">xor</span> rax, rax</code></pre>
<p>And you must have wondered why it was like that instead a more sane</p>
<pre class="sourceCode nasm"><code class="sourceCode nasm"><span class="kw">mov</span> rax, <span class="dv">0</span></code></pre>
<p>With a little gdb and googling, one can find out that <code>xor rax, rax</code> compiles to <code>48 31 c0</code> in machine code, while <code>xor rax, 0</code> compiles to <code>b8 00 00 00 00</code>.</p>
<p>So the first instruction not only generated less code, it is faster to execute, because the CPU has to fetch less data from memory. This is another, very used, advantage of xor.</p>
<h2 id="game-theory">Game Theory</h2>
<p>In Combinatorial Game Theory there is a very important function called the Sprague-Grundy function.</p>
<p>\[g(x) = mex\left\{g(y), y \in F(x)\right\}\]</p>
<p>Where \(mex\) is the minimum excluded natural of the set and \(F(x)\) the all the possible following positions from \(x\).</p>
<p>One can show (I won’t do it here, you can check it in [1]) that if a position \(x\) in a game is a P position, i.e., the next player loses, then \(g(x) = 0\) and viceversa.</p>
<p>Now, the important thing about this function is the concept of <em>sum of games</em>. Some games are very hard to analyze on their own, for example <a href="http://en.wikipedia.org/wiki/Nim">Nim</a>. So one can think about Nim as several Nims with only 1 heap being played simultaneously.</p>
<p>This concept is called sum of games, and if \(G_1\) and \(G_2\) are games, the game of playing them simultaneously is \((G_1, G_2)\).</p>
<p>The <strong>Sprague-Grundy theorem</strong> says that \(g((G_1, G_2)) = g(G_1) \oplus g(G_2)\). Yes, that is a xor, though in this context it is called Nim-sum. Again for a proof you can see [1], but it is very simple.</p>
<h2 id="other-interesting-but-not-so-useful-properties">Other interesting-but-not-so-useful properties</h2>
<ul>
<li><p><strong>A field over \(\mathbb{N}\)</strong>. We saw earlier that \((\mathbb{N}, \oplus)\) is a group. So if we can find another operation that satisfies the field axioms, we can get a field. This is difficult, yet possible. John Conway did it, and a detailed text about this can be found at [2].</p></li>
<li><p><a href="http://en.wikipedia.org/wiki/Rule_90"><strong>Rule 90</strong></a>. If we consider the elementary cellular automaton based on \(\oplus\), given a random initial configuration, the configuration stays random every step.</p></li>
</ul>
<h2 id="references">References</h2>
<p>[1] <a href="http://www.math.ucla.edu/~tom/Game_Theory/Contents.html">Ferguson, T. <em>Game Theory</em></a></p>
<p>[2] Conway, J. <em>On Numbers and Games</em></p>


        </div>
        <div id="footer">
            <a href="https://github.com/gciruelos">github</a> |
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>

     
    <script type="text/x-mathjax-config">
         MathJax.Hub.Config({TeX:{extensions: ["AMSmath.js", "AMSsymbols.js"]},
                                  extensions:["tex2jax.js"],
                                  tex2jax: {
                                             inlineMath: [ ["\\(","\\)"] ],
                                             displayMath: [ ["\\[","\\]"] ],
                                             processEscapes: true
                                           },
                                  "HTML-CSS": { availableFonts: ["TeX"] }});
    </script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML-full"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-60347053-1', 'auto');
      ga('send', 'pageview');
    </script>
</html>
